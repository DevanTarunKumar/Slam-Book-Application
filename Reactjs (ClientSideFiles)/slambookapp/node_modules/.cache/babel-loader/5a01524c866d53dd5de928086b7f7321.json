{"ast":null,"code":"import _assertThisInitialized from \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\devan\\\\Desktop\\\\myProjectYard\\\\slambookapp\\\\src\\\\user\\\\login\\\\Login.js\";\nimport React, { Component } from \"react\";\nimport { login } from \"../../util/APIUtils\";\nimport \"./Login.css\";\nimport { Link } from \"react-router-dom\";\nimport { ACCESS_TOKEN } from \"../../constants\";\nimport { Form, Input, Button, Icon, notification } from \"antd\";\nvar FormItem = Form.Item;\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    _classCallCheck(this, Login);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      {\n        getCurrentUser().then(function (response) {\n          _this.props.history.push(\"/home\");\n        }).catch(function (error) {// this.props.history.push(\"/\");\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var AntWrappedLoginForm = Form.create()(LoginForm);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, \"This is Welcome page\"), React.createElement(\"div\", {\n        className: \"login-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"page-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"div\", {\n        className: \"login-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, React.createElement(AntWrappedLoginForm, {\n        onLogin: this.props.onLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(LoginForm, _Component2);\n\n  function LoginForm(props) {\n    var _this2;\n\n    _classCallCheck(this, LoginForm);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).call(this, props));\n    _this2.handleSubmit = _this2.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    return _this2;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var loginRequest = Object.assign({}, values);\n          login(loginRequest).then(function (response) {\n            localStorage.setItem(ACCESS_TOKEN, response.accessToken);\n\n            _this3.props.onLogin();\n          }).catch(function (error) {\n            if (error.status === 401) {\n              notification.error({\n                message: \"Polling App\",\n                description: \"Your Username or Password is incorrect. Please try again!\"\n              });\n            } else {\n              notification.error({\n                message: \"Polling App\",\n                description: error.message || \"Sorry! Something went wrong. Please try again!\"\n              });\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, getFieldDecorator(\"usernameOrEmail\", {\n        rules: [{\n          required: true,\n          message: \"Please input your username or email!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }),\n        size: \"large\",\n        name: \"usernameOrEmail\",\n        placeholder: \"Username or Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, getFieldDecorator(\"password\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Password!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"lock\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }),\n        size: \"large\",\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        size: \"large\",\n        className: \"login-form-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Login\"), \"Or \", React.createElement(Link, {\n        to: \"/signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"register now!\")));\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["C:\\Users\\devan\\Desktop\\myProjectYard\\slambookapp\\src\\user\\login\\Login.js"],"names":["React","Component","login","Link","ACCESS_TOKEN","Form","Input","Button","Icon","notification","FormItem","Item","Login","props","getCurrentUser","then","response","history","push","catch","error","AntWrappedLoginForm","create","LoginForm","onLogin","handleSubmit","bind","event","preventDefault","form","validateFields","err","values","loginRequest","Object","assign","localStorage","setItem","accessToken","status","message","description","getFieldDecorator","rules","required"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { login } from \"../../util/APIUtils\";\nimport \"./Login.css\";\nimport { Link } from \"react-router-dom\";\nimport { ACCESS_TOKEN } from \"../../constants\";\n\nimport { Form, Input, Button, Icon, notification } from \"antd\";\nconst FormItem = Form.Item;\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    {\n      getCurrentUser()\n        .then(response => {\n          this.props.history.push(\"/home\");\n        })\n        .catch(error => {\n          // this.props.history.push(\"/\");\n        });\n    }\n  }\n  render() {\n    const AntWrappedLoginForm = Form.create()(LoginForm);\n    return (\n      <div>\n        <p>This is Welcome page</p>\n\n        <div className=\"login-container\">\n          <h1 className=\"page-title\">Login</h1>\n          <div className=\"login-content\">\n            <AntWrappedLoginForm onLogin={this.props.onLogin} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        const loginRequest = Object.assign({}, values);\n        login(loginRequest)\n          .then(response => {\n            localStorage.setItem(ACCESS_TOKEN, response.accessToken);\n            this.props.onLogin();\n          })\n          .catch(error => {\n            if (error.status === 401) {\n              notification.error({\n                message: \"Polling App\",\n                description:\n                  \"Your Username or Password is incorrect. Please try again!\"\n              });\n            } else {\n              notification.error({\n                message: \"Polling App\",\n                description:\n                  error.message ||\n                  \"Sorry! Something went wrong. Please try again!\"\n              });\n            }\n          });\n      }\n    });\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <Form onSubmit={this.handleSubmit} className=\"login-form\">\n        <FormItem>\n          {getFieldDecorator(\"usernameOrEmail\", {\n            rules: [\n              {\n                required: true,\n                message: \"Please input your username or email!\"\n              }\n            ]\n          })(\n            <Input\n              prefix={<Icon type=\"user\" />}\n              size=\"large\"\n              name=\"usernameOrEmail\"\n              placeholder=\"Username or Email\"\n            />\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator(\"password\", {\n            rules: [{ required: true, message: \"Please input your Password!\" }]\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" />}\n              size=\"large\"\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n            />\n          )}\n        </FormItem>\n        <FormItem>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            size=\"large\"\n            className=\"login-form-button\"\n          >\n            Login\n          </Button>\n          Or <Link to=\"/signup\">register now!</Link>\n        </FormItem>\n      </Form>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}